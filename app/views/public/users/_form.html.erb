<div class="form-group">
  <%= form_with model: @user do |f| %>
    <i class="far fa-image"></i> <%= f.label :image %><br />
    <%= f.file_field :image, class: "img-fluid" %><br />
    <i class="fas fa-user-circle"></i> <%= f.label :name, class: "mt-4" %>
    <%= f.text_field :name, class: "form-control", placeholder: "20文字まで入力可能", maxlength: "20" %>
    <i class="far fa-file-alt"></i> <%= f.label :introduction %>
    <%= f.text_area :introduction, class: "form-control", placeholder: "150文字まで入力可能", rows: "3", maxlength: "150" %>
    <p class="text-right"><span></span></p>
    <%= f.submit  class: "form-control btn btn-outline-success" %>
  <% end %>
</div>

<script>
document.addEventListener('input',e=>{
  let t=e.target.closest('.form-group textarea');
  if(t){
    t.closest('.form-group').querySelector('p span').textContent=t.value.length;
  }
});
</script>